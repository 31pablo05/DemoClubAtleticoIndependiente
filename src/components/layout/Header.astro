---
// Header.astro - Navigation header premium redesign
const navLinks = [
  { name: 'Inicio',      href: '/' },
  { name: 'El Club',     href: '/club' },
  { name: 'Deportes',    href: '/deportes' },
  { name: 'Cronograma',  href: '/cronograma' },
  { name: 'Tienda',      href: '/tienda' },
  { name: 'Alquiler',    href: '/alquiler' },
  { name: 'Contacto',    href: '/contacto' },
];

const currentPath = Astro.url.pathname;
---

<style>
  @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Barlow+Condensed:wght@400;600;700&family=Barlow:wght@300;400;500&display=swap');

  :root {
    --red:     #D42B2B;
    --red-2:   #B01E1E;
    --black:   #0A0A0A;
    --surface: #111111;
    --card:    #141414;
    --border:  rgba(212,43,43,0.15);
    --white:   #F5F5F5;
  }

  /* ── Header shell ────────────────────────────────────── */
  #main-header {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 100;
    transition: background 0.35s ease, border-color 0.35s ease, box-shadow 0.35s ease, backdrop-filter 0.35s ease;
  }

  /* gradient on top */
  #main-header.at-top {
    background: linear-gradient(135deg, rgba(130,8,8,0.96) 0%, rgba(10,10,10,0.97) 55%, rgba(10,10,10,0.95) 100%);
    border-bottom: 1px solid rgba(212,43,43,0.25);
  }

  /* scrolled — glass */
  #main-header.scrolled {
    background: rgba(10,10,10,0.92);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
    box-shadow: 0 4px 40px rgba(0,0,0,0.5);
  }

  /* thin red accent line top */
  #main-header::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent 0%, var(--red) 30%, var(--red) 70%, transparent 100%);
    opacity: 0;
    transition: opacity 0.35s;
  }
  #main-header.scrolled::before { opacity: 1; }

  /* ── Inner nav ───────────────────────────────────────── */
  .header-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 1.5rem;
    height: 70px;
    max-width: 1280px;
    margin: 0 auto;
  }

  /* ── Logo ────────────────────────────────────────────── */
  .logo-link {
    display: flex;
    align-items: center;
    gap: 0.85rem;
    text-decoration: none;
    flex-shrink: 0;
  }
  .logo-shield {
    position: relative;
    width: 44px; height: 44px;
    flex-shrink: 0;
  }
  .logo-shield-ring {
    position: absolute;
    inset: -6px;
    border-radius: 50%;
    border: 1px solid rgba(212,43,43,0);
    transition: border-color 0.3s;
  }
  .logo-link:hover .logo-shield-ring {
    border-color: rgba(212,43,43,0.4);
  }
  .logo-shield img {
    width: 44px; height: 44px;
    object-fit: contain;
    position: relative;
    z-index: 2;
    filter: drop-shadow(0 0 10px rgba(212,43,43,0.3));
    transition: filter 0.3s, transform 0.3s;
  }
  .logo-link:hover .logo-shield img {
    filter: drop-shadow(0 0 18px rgba(212,43,43,0.7));
    transform: scale(1.06);
  }
  .logo-text-block { display: flex; flex-direction: column; line-height: 1.1; }
  .logo-top {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.6rem;
    font-weight: 700;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--red);
  }
  .logo-main {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.15rem;
    letter-spacing: 0.08em;
    color: var(--white);
  }

  /* ── Desktop nav ─────────────────────────────────────── */
  .desktop-nav {
    display: none;
    align-items: center;
    gap: 0.25rem;
    list-style: none;
    margin: 0; padding: 0;
  }
  @media (min-width: 1024px) {
    .desktop-nav { display: flex; }
  }

  .nav-item a {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.82rem;
    font-weight: 700;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: rgba(255,255,255,0.55);
    padding: 0.45rem 0.8rem;
    position: relative;
    display: block;
    transition: color 0.2s;
    text-decoration: none;
  }
  .nav-item a::after {
    content: '';
    position: absolute;
    bottom: -2px; left: 0.8rem; right: 0.8rem;
    height: 1.5px;
    background: var(--red);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.25s ease;
  }
  .nav-item a:hover,
  .nav-item a.active {
    color: var(--white);
  }
  .nav-item a:hover::after,
  .nav-item a.active::after {
    transform: scaleX(1);
  }
  .nav-item a.active {
    color: var(--red);
  }
  .nav-item a.active::after {
    background: var(--red);
    transform: scaleX(1);
  }

  /* ── Header right side ───────────────────────────────── */
  .header-right {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  /* ── WhatsApp CTA ────────────────────────────────────── */
  .btn-wa {
    display: none;
    align-items: center;
    gap: 0.5rem;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 0.9rem;
    letter-spacing: 0.12em;
    padding: 0.55rem 1.4rem;
    background: var(--red);
    color: white;
    border-radius: 2px;
    text-decoration: none;
    position: relative;
    overflow: hidden;
    transition: transform 0.2s, box-shadow 0.25s;
  }
  @media (min-width: 768px) { .btn-wa { display: flex; } }
  .btn-wa::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.12), transparent);
    transform: translateX(-100%);
    transition: transform 0.45s ease;
  }
  .btn-wa:hover::before { transform: translateX(100%); }
  .btn-wa:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(212,43,43,0.45);
  }

  /* ── Hamburger button ────────────────────────────────── */
  .hamburger-btn {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-end;
    gap: 5px;
    width: 36px; height: 36px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
  }
  @media (min-width: 1024px) { .hamburger-btn { display: none; } }

  .hamburger-btn span {
    display: block;
    height: 1.5px;
    background: white;
    border-radius: 2px;
    transition: transform 0.3s ease, opacity 0.3s, width 0.3s;
  }
  .hamburger-btn span:nth-child(1) { width: 28px; }
  .hamburger-btn span:nth-child(2) { width: 20px; }
  .hamburger-btn span:nth-child(3) { width: 24px; }

  .hamburger-btn.open span:nth-child(1) {
    width: 26px;
    transform: translateY(6.5px) rotate(45deg);
  }
  .hamburger-btn.open span:nth-child(2) {
    opacity: 0;
    width: 0;
  }
  .hamburger-btn.open span:nth-child(3) {
    width: 26px;
    transform: translateY(-6.5px) rotate(-45deg);
  }
  .hamburger-btn.open {
    visibility: hidden;
    pointer-events: none;
  }

  /* ── Mobile menu overlay ─────────────────────────────── */
  #mobile-menu {
    position: fixed;
    inset: 0;
    z-index: 101;
    display: flex;
    flex-direction: column;
    pointer-events: none;
    visibility: hidden;
  }
  #mobile-menu.open {
    pointer-events: all;
    visibility: visible;
  }

  /* backdrop */
  .mobile-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.6);
    opacity: 0;
    transition: opacity 0.35s;
    backdrop-filter: blur(4px);
  }
  #mobile-menu.open .mobile-backdrop { opacity: 1; }

  /* panel slides from right */
  .mobile-panel {
    position: absolute;
    top: 0; right: 0;
    width: min(340px, 88vw);
    height: 100%;
    background: var(--black);
    border-left: 1px solid var(--border);
    transform: translateX(100%);
    transition: transform 0.38s cubic-bezier(0.16,1,0.3,1);
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    overflow-x: hidden;
  }
  #mobile-menu.open .mobile-panel {
    transform: translateX(0);
  }

  /* noise on panel */
  .mobile-panel::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.025'/%3E%3C/svg%3E");
    pointer-events: none;
  }

  /* orb inside mobile panel */
  .mobile-panel::after {
    content: '';
    position: absolute;
    bottom: -100px; left: -100px;
    width: 300px; height: 300px;
    border-radius: 50%;
    background: radial-gradient(circle, var(--red) 0%, transparent 70%);
    opacity: 0.06;
    filter: blur(40px);
    pointer-events: none;
  }

  /* red top accent */
  .mobile-panel-topbar {
    height: 2px;
    background: var(--red);
    flex-shrink: 0;
  }

  /* panel header */
  .mobile-panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.2rem 1.5rem;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    position: relative;
    z-index: 2;
    flex-shrink: 0;
  }

  .mobile-close-btn {
    width: 36px; height: 36px;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 3px;
    background: var(--card);
    color: rgba(255,255,255,0.6);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    transition: border-color 0.2s, color 0.2s, background 0.2s;
  }
  .mobile-close-btn:hover {
    border-color: var(--red);
    color: white;
    background: rgba(212,43,43,0.1);
  }

  /* mobile nav links */
  .mobile-nav {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 1.5rem;
    gap: 0;
    position: relative;
    z-index: 2;
  }

  .mobile-nav-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.6rem;
    letter-spacing: 0.06em;
    color: rgba(255,255,255,0.45);
    text-decoration: none;
    padding: 0.9rem 0;
    border-bottom: 1px solid rgba(255,255,255,0.04);
    position: relative;
    overflow: hidden;
    transition: color 0.2s, padding-left 0.25s;
  }
  .mobile-nav-item:last-of-type { border-bottom: none; }

  .mobile-nav-item .item-num {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.6rem;
    font-weight: 700;
    letter-spacing: 0.2em;
    color: var(--red);
    opacity: 0.5;
    width: 1.5rem;
    flex-shrink: 0;
    transition: opacity 0.2s;
  }
  .mobile-nav-item:hover,
  .mobile-nav-item.active {
    color: var(--white);
    padding-left: 0.4rem;
  }
  .mobile-nav-item:hover .item-num,
  .mobile-nav-item.active .item-num { opacity: 1; }
  .mobile-nav-item.active { color: var(--red); }

  /* mobile bottom area */
  .mobile-footer-area {
    padding: 1.5rem;
    border-top: 1px solid rgba(255,255,255,0.05);
    position: relative;
    z-index: 2;
    flex-shrink: 0;
  }

  .mobile-wa-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.6rem;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1rem;
    letter-spacing: 0.15em;
    padding: 0.9rem;
    background: var(--red);
    color: white;
    border-radius: 2px;
    text-decoration: none;
    width: 100%;
    transition: background 0.2s, transform 0.2s;
    margin-bottom: 1rem;
  }
  .mobile-wa-btn:hover {
    background: var(--red-2);
    transform: translateY(-1px);
  }

  .mobile-contact-info {
    font-family: 'Barlow', sans-serif;
    font-size: 0.72rem;
    color: rgba(255,255,255,0.25);
    letter-spacing: 0.05em;
    text-align: center;
  }
</style>

<!-- ══════════════════════════════════════════════════════
     HEADER
══════════════════════════════════════════════════════ -->
<header id="main-header" class="at-top">
  <div class="header-inner">

    <!-- Logo -->
    <a href="/" class="logo-link">
      <div class="logo-shield">
        <div class="logo-shield-ring"></div>
        <img src="/logo/escudoindep.png" alt="Escudo Club Atlético Independiente" width="44" height="44" />
      </div>
      <div class="logo-text-block">
        <span class="logo-top">Club Atlético</span>
        <span class="logo-main">INDEPENDIENTE</span>
      </div>
    </a>

    <!-- Desktop nav -->
    <ul class="desktop-nav">
      {navLinks.map(link => (
        <li class="nav-item">
          <a
            href={link.href}
            class={currentPath === link.href ? 'active' : ''}
          >
            {link.name}
          </a>
        </li>
      ))}
    </ul>

    <!-- Right side -->
    <div class="header-right">
      <!-- WhatsApp CTA -->
      <a
        href="https://wa.me/542804306350"
        target="_blank"
        rel="noopener noreferrer"
        class="btn-wa"
        aria-label="Contactar por WhatsApp"
      >
        <svg width="15" height="15" fill="currentColor" viewBox="0 0 24 24">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
        </svg>
        WhatsApp
      </a>

      <!-- Hamburger -->
      <button class="hamburger-btn" id="hamburger-btn" aria-label="Abrir menú">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

  </div>
</header>

<!-- ══════════════════════════════════════════════════════
     MOBILE MENU
══════════════════════════════════════════════════════ -->
<div id="mobile-menu" role="dialog" aria-label="Menú de navegación">
  <div class="mobile-backdrop" id="mobile-backdrop"></div>

  <div class="mobile-panel">
    <div class="mobile-panel-topbar"></div>

    <!-- Panel header -->
    <div class="mobile-panel-header">
      <div style="display:flex; align-items:center; gap:0.7rem;">
        <img src="/logo/escudoindep.png" alt="Escudo" width="34" height="34"
          style="filter:drop-shadow(0 0 8px rgba(212,43,43,0.4));" />
        <div>
          <div style="font-family:'Barlow Condensed',sans-serif; font-size:0.55rem; font-weight:700; letter-spacing:0.3em; color:var(--red); text-transform:uppercase;">Club Atlético</div>
          <div style="font-family:'Bebas Neue',sans-serif; font-size:1rem; letter-spacing:0.06em; color:white; line-height:1;">INDEPENDIENTE</div>
        </div>
      </div>

      <button class="mobile-close-btn" id="mobile-close-btn" aria-label="Cerrar menú">
        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- Navigation links -->
    <nav class="mobile-nav">
      {navLinks.map((link, i) => (
        <a
          href={link.href}
          class={`mobile-nav-item${currentPath === link.href ? ' active' : ''}`}
        >
          <span class="item-num">{String(i + 1).padStart(2, '0')}</span>
          {link.name}
        </a>
      ))}
    </nav>

    <!-- Bottom contact area -->
    <div class="mobile-footer-area">
      <a
        href="https://wa.me/542804306350"
        target="_blank"
        rel="noopener noreferrer"
        class="mobile-wa-btn"
      >
        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
        </svg>
        CONTACTAR POR WHATSAPP
      </a>

      <p class="mobile-contact-info">
        Trelew, Chubut · Argentina<br/>
        280 486 7740
      </p>
    </div>
  </div>
</div>

<script>
  // ── Scroll behavior ─────────────────────────────────────
  const header = document.getElementById('main-header');

  const updateHeader = () => {
    if (!header) return;
    if (window.scrollY > 30) {
      header.classList.remove('at-top');
      header.classList.add('scrolled');
    } else {
      header.classList.remove('scrolled');
      header.classList.add('at-top');
    }
  };

  window.addEventListener('scroll', updateHeader, { passive: true });
  updateHeader();

  // ── Mobile menu ─────────────────────────────────────────
  const hamburgerBtn  = document.getElementById('hamburger-btn');
  const mobileMenu    = document.getElementById('mobile-menu');
  const mobileClose   = document.getElementById('mobile-close-btn');
  const mobileBackdrop = document.getElementById('mobile-backdrop');

  const openMenu = () => {
    mobileMenu?.classList.add('open');
    hamburgerBtn?.classList.add('open');
    document.body.style.overflow = 'hidden';
  };

  const closeMenu = () => {
    mobileMenu?.classList.remove('open');
    hamburgerBtn?.classList.remove('open');
    document.body.style.overflow = '';
  };

  hamburgerBtn?.addEventListener('click', openMenu);
  mobileClose?.addEventListener('click', closeMenu);
  mobileBackdrop?.addEventListener('click', closeMenu);

  // close on link click
  document.querySelectorAll('.mobile-nav-item').forEach(link => {
    link.addEventListener('click', closeMenu);
  });

  // close on ESC
  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') closeMenu();
  });
</script>